(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{pSNt:function(t,e,a){"use strict";var o=a("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(a("MVZn")),n=o(a("o0o1")),c=a("Be1T"),i=a("P9HM"),u=a("uI15"),l={namespace:"multiAccountTradeForm",state:{fuzzySymbol:void 0,exchange:void 0,priceAutoComplete:"MANUAL",price:0,direction:void 0,tick:void 0,step:1e-4,mixContractMap:new Map,form:void 0,rtAccountIDs:[]},effects:{updateTick:n.default.mark(function t(e,a){var o,r,c;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return o=e.payload,r=a.put,c=o,t.next=5,r({type:"updateStateTick",payload:c});case 5:case"end":return t.stop()}},t,this)}),update:n.default.mark(function t(e,a){var o,r,c;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return o=e.payload,r=a.put,c=o,t.next=5,r({type:"updateState",payload:c});case 5:case"end":return t.stop()}},t,this)}),reset:n.default.mark(function t(e,a){var o,r,c;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return o=e.payload,r=a.put,c=o,t.next=5,r({type:"resetState",payload:c});case 5:case"end":return t.stop()}},t,this)}),updateContracts:n.default.mark(function t(e,a){var o,r,c;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return o=e.payload,r=a.put,c=o,t.next=5,r({type:"updateStateContracts",payload:c});case 5:case"end":return t.stop()}},t,this)}),fetchContracts:n.default.mark(function t(e,a){var o,i,u,l;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return o=e.payload,i=a.call,u=a.put,t.next=4,i(c.queryContracts,(0,r.default)({},o,{token:sessionStorage.getItem("token")}));case 4:return l=t.sent,t.next=7,u({type:"saveContracts",payload:l&&l.data&&Array.isArray(l.data)?l.data:[]});case 7:case"end":return t.stop()}},t,this)})},reducers:{updateState:function(t,e){var a,o,n=1e-4;if((null!=e.payload.fuzzySymbol&&void 0!==e.payload.fuzzySymbol?a=e.payload.fuzzySymbol:null!=t.fuzzySymbol&&void 0!==t.fuzzySymbol&&(a=t.fuzzySymbol),null!=a&&void 0!==a)&&(null!=e.payload.exchange&&void 0!==e.payload.exchange?o=e.payload.exchange:null!=t.exchange&&void 0!==t.exchange&&(o=t.exchange),null!=o&&void 0!==o&&(a="".concat(a,".").concat(o)),null!=t.mixContractMap&&void 0!==t.mixContractMap&&t.mixContractMap.has(a))){var c=t.mixContractMap.get(a);n=c.priceTick}var i=0;return null!=e.payload.price&&void 0!==e.payload.price?i=e.payload.price:null!=t.price&&void 0!==t.price&&(i=t.price),i=(0,u.roundWithStep)(i,n),(0,r.default)({},t,e.payload,{step:n,price:(0,u.numberFormat)(i,4)})},resetState:function(){return{fuzzySymbol:void 0,exchange:void 0,priceAutoComplete:"MANUAL",price:0,direction:void 0,step:1e-4,rtAccountIDs:[]}},saveContracts:function(t,e){var a=new Map;return e.payload.forEach(function(t){a.set(t.rtContractID,t),a.set(t.rtSymbol,t),a.set(t.symbol,t),a.set("".concat(t.symbol,".").concat(t.gatewayID),t)}),(0,r.default)({},t,{mixContractMap:a})},updateStateContracts:function(t,e){return e.payload.forEach(function(e){t.mixContractMap.set(e.rtSymbol,e),t.mixContractMap.set(e.rtContractID,e),t.mixContractMap.set(e.symbol,e),t.mixContractMap.set("".concat(e.symbol,".").concat(e.gatewayID),e)}),(0,r.default)({},t,{mixContractMap:t.mixContractMap})},updateStateTick:function(t,e){var a=e.payload;if(null==t.fuzzySymbol||void 0===t.fuzzySymbol||void 0===t.direction||null===t.direction||"MANUAL"===t.priceAutoComplete)return t;var o=t.fuzzySymbol;null!=t.exchange&&void 0!==t.exchange&&(o="".concat(t.fuzzySymbol,".").concat(t.exchange));var n=null;if(a.forEach(function(e){null!=t.exchange&&void 0!==t.exchange?o===e.rtSymbol&&(n=e):o===e.symbol&&(n=e)}),null!=n&&void 0!==n){var c=t.price;if(null!=t.priceAutoComplete&&void 0!==t.priceAutoComplete)if("LASTPRICE"===t.priceAutoComplete)c=n.lastPrice;else if("ACTIVE"===t.priceAutoComplete)t.direction===i.DIRECTION_LONG?c=n.askPrice1:t.direction===i.DIRECTION_SHORT&&(c=n.bidPrice1);else if("QUEUE"===t.priceAutoComplete)t.direction===i.DIRECTION_LONG?c=n.bidPrice1:t.direction===i.DIRECTION_SHORT&&(c=n.askPrice1);else if("ADD2"===t.priceAutoComplete)if(null!=t.mixContractMap&&void 0!==t.mixContractMap&&t.mixContractMap.has(o)){var l=t.mixContractMap.get(o),p=l.priceTick;t.direction===i.DIRECTION_LONG?c=n.askPrice1+2*p:t.direction===i.DIRECTION_SHORT&&(c=n.bidPrice1-2*p)}else c=n.lastPrice;return(0,r.default)({},t,{price:(0,u.numberFormat)(c,4),tick:n})}return t}}};e.default=l}}]);